---
import Layout from "../layouts/Layout.astro";
import TerminalCarousel from "../components/TerminalCarousel.astro";
import QuickStart from "../components/QuickStart.astro";
import {
    Terminal,
    Zap,
    Database,
    GitBranch,
    Search,
    Network,
    Github,
    BookOpen,
    Apple,
    Monitor,
    Box,
    FileCode,
    ArrowRight,
} from "lucide-astro";
---

<Layout
    title="dora - The explorer for your codebase"
    description="Query symbols, dependencies, and references without reading files. Built for AI agents, useful for humans too."
>
    <div class="max-w-6xl mx-auto px-6 py-20">
        <!-- Hero -->
        <div class="text-center mb-16 md:mb-20">
            <div class="text-xs md:text-sm text-zinc-500 mb-8 px-3 py-1">
                CLI made for AI agents
            </div>
            <h1
                class="text-5xl md:text-6xl font-bold mb-4 md:mb-6 text-blue-500 flex items-center justify-center gap-3 md:gap-4"
            >
                <Terminal class="w-12 h-12 md:w-16 md:h-16" />
                <span>dora</span>
            </h1>
            <div
                class="text-sm md:text-base text-zinc-400 px-3 py-1 mb-6 md:mb-8 border-t border-zinc-800 inline-block"
            >
                the explorer for your codebase
            </div>

            <TerminalCarousel />
            <div class="flex gap-3 justify-center flex-wrap">
                <a
                    href="#quick-start"
                    class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 md:px-6 md:py-3 rounded-lg font-semibold transition-colors flex items-center gap-2 text-sm md:text-base"
                >
                    <Zap class="w-4 h-4 md:w-5 md:h-5" />
                    Quick Start
                </a>
                <a
                    href="/docs"
                    class="border-2 border-blue-500 hover:bg-blue-500/10 text-blue-400 px-4 py-2 md:px-6 md:py-3 rounded-lg font-semibold transition-colors flex items-center gap-2 text-sm md:text-base"
                >
                    <BookOpen class="w-4 h-4 md:w-5 md:h-5" />
                    Documentation
                </a>
            </div>
        </div>

        <!-- Problem Statement -->
        <div class="mb-20">
            <div
                class="bg-blue-950/20 border border-blue-900/50 rounded-lg p-8 max-w-4xl mx-auto"
            >
                <h2 class="text-2xl font-bold mb-4 text-blue-300">Why dora?</h2>
                <p class="text-zinc-300 text-lg leading-relaxed">
                    AI coding assistants waste tokens on grep/find/glob to
                    understand code structure. Text-based search gives false
                    positives and misses relationships. dora indexes your
                    codebase so agents can query symbols, dependencies, and
                    references instantly, without reading files.
                </p>
            </div>
        </div>

        <!-- AI Agent Examples -->
        <div class="mb-20">
            <h2 class="text-3xl font-bold mb-8 text-center">
                Steer your AI agent with better alternatives
            </h2>
            <div class="max-w-5xl mx-auto">
                <!-- Headers (desktop only) -->
                <div class="hidden md:grid md:grid-cols-2 gap-8 mb-4">
                    <h3 class="text-lg font-semibold text-zinc-300">
                        Typical AI agent workflow
                    </h3>
                    <h3 class="text-lg font-semibold text-zinc-300">
                        With dora
                    </h3>
                </div>

                <!-- Example pairs -->
                <div class="space-y-6 md:space-y-3 text-sm font-mono">
                    <!-- Example 1: Directory Structure -->
                    <div class="grid md:grid-cols-2 gap-3">
                        <div
                            class="bg-zinc-900 border border-zinc-800 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Explore directory structure
                            </div>
                            <div class="text-zinc-300">
                                tree -L 2 src -I 'node_modules'
                            </div>
                        </div>
                        <div
                            class="bg-zinc-900 border border-blue-900/50 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Explore directory structure
                            </div>
                            <div class="text-blue-300">
                                dora ls src --sort symbols
                            </div>
                        </div>
                    </div>

                    <!-- Example 2: Finding Exports -->
                    <div class="grid md:grid-cols-2 gap-3">
                        <div
                            class="bg-zinc-900 border border-zinc-800 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Find what a file exports
                            </div>
                            <div class="text-zinc-300">
                                grep "^export function" src/db/queries.ts
                            </div>
                        </div>
                        <div
                            class="bg-zinc-900 border border-blue-900/50 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Find what a file exports
                            </div>
                            <div class="text-blue-300">
                                dora exports src/db/queries.ts
                            </div>
                        </div>
                    </div>

                    <!-- Example 3: Counting Files -->
                    <div class="grid md:grid-cols-2 gap-3">
                        <div
                            class="bg-zinc-900 border border-zinc-800 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Count TypeScript files
                            </div>
                            <div class="text-zinc-300">
                                find src -type f -name "*.ts" | wc -l
                            </div>
                        </div>
                        <div
                            class="bg-zinc-900 border border-blue-900/50 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Count TypeScript files
                            </div>
                            <div class="text-blue-300">dora ls src</div>
                        </div>
                    </div>

                    <!-- Example 4: Code Search -->
                    <div class="grid md:grid-cols-2 gap-3">
                        <div
                            class="bg-zinc-900 border border-zinc-800 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Search for symbol definitions
                            </div>
                            <div class="text-zinc-300">
                                grep -r "language" src/converter/ | head -5
                            </div>
                        </div>
                        <div
                            class="bg-zinc-900 border border-blue-900/50 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Search for symbol definitions
                            </div>
                            <div class="text-blue-300">
                                dora symbol language
                            </div>
                        </div>
                    </div>

                    <!-- Example 5: Understanding Dependencies -->
                    <div class="grid md:grid-cols-2 gap-3">
                        <div
                            class="bg-zinc-900 border border-zinc-800 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Understand file dependencies
                            </div>
                            <div class="text-zinc-300">
                                grep -A 10 '"dependencies"' package.json
                            </div>
                        </div>
                        <div
                            class="bg-zinc-900 border border-blue-900/50 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Understand file dependencies
                            </div>
                            <div class="text-blue-300">
                                dora file src/converter/convert.ts
                            </div>
                        </div>
                    </div>

                    <!-- Example 6: Database Status -->
                    <div class="grid md:grid-cols-2 gap-3">
                        <div
                            class="bg-zinc-900 border border-zinc-800 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Check index status
                            </div>
                            <div class="text-zinc-300">
                                ls -lh .dora/dora.db
                            </div>
                        </div>
                        <div
                            class="bg-zinc-900 border border-blue-900/50 rounded p-3"
                        >
                            <div class="text-zinc-500 mb-1">
                                # Check index status
                            </div>
                            <div class="text-blue-300">dora status</div>
                        </div>
                    </div>
                </div>
            </div>
            <p class="text-center text-zinc-500 mt-8 text-sm">
                grep/find/glob work on text patterns. dora understands your code
                structure.
            </p>
        </div>

        <!-- Quick Start -->
        <QuickStart />

        <!-- What it does -->
        <div class="mb-20">
            <h2 class="text-3xl font-bold mb-12 text-center">
                What your AI agent can do
            </h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-zinc-900 border border-zinc-800 rounded-lg p-6">
                    <div
                        class="w-12 h-12 rounded-lg bg-blue-500/10 flex items-center justify-center mb-4"
                    >
                        <Search class="w-6 h-6 text-blue-400" />
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Find symbols</h3>
                    <p class="text-zinc-400">
                        Locate definitions instantly without reading files or
                        parsing false positives from text search.
                    </p>
                </div>

                <div class="bg-zinc-900 border border-zinc-800 rounded-lg p-6">
                    <div
                        class="w-12 h-12 rounded-lg bg-blue-500/10 flex items-center justify-center mb-4"
                    >
                        <Network class="w-6 h-6 text-blue-400" />
                    </div>
                    <h3 class="text-xl font-semibold mb-2">
                        Track dependencies
                    </h3>
                    <p class="text-zinc-400">
                        Understand impact before making changes. Know exactly
                        what depends on each file without reading imports.
                    </p>
                </div>

                <div class="bg-zinc-900 border border-zinc-800 rounded-lg p-6">
                    <div
                        class="w-12 h-12 rounded-lg bg-blue-500/10 flex items-center justify-center mb-4"
                    >
                        <GitBranch class="w-6 h-6 text-blue-400" />
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Find references</h3>
                    <p class="text-zinc-400">
                        See usage across the entire codebase in milliseconds. No
                        more grepping through thousands of files.
                    </p>
                </div>

                <div class="bg-zinc-900 border border-zinc-800 rounded-lg p-6">
                    <div
                        class="w-12 h-12 rounded-lg bg-blue-500/10 flex items-center justify-center mb-4"
                    >
                        <Database class="w-6 h-6 text-blue-400" />
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Detect cycles</h3>
                    <p class="text-zinc-400">
                        Identify circular dependencies and architectural issues
                        instantly with pre-computed relationship data.
                    </p>
                </div>

                <div class="bg-zinc-900 border border-zinc-800 rounded-lg p-6">
                    <div
                        class="w-12 h-12 rounded-lg bg-blue-500/10 flex items-center justify-center mb-4"
                    >
                        <Zap class="w-6 h-6 text-blue-400" />
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Find unused code</h3>
                    <p class="text-zinc-400">
                        Spot dead code instantly. See which symbols have zero
                        references without scanning every file.
                    </p>
                </div>

                <div class="bg-zinc-900 border border-zinc-800 rounded-lg p-6">
                    <div
                        class="w-12 h-12 rounded-lg bg-blue-500/10 flex items-center justify-center mb-4"
                    >
                        <Terminal class="w-6 h-6 text-blue-400" />
                    </div>
                    <h3 class="text-xl font-semibold mb-2">
                        Write custom queries
                    </h3>
                    <p class="text-zinc-400">
                        Answer complex questions about code structure with SQL.
                        No limitations, just structured data.
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- How It Works -->
    <div class="mb-20 px-8">
        <h2 class="text-3xl font-bold mb-16 text-center">How it works</h2>
        <div class="max-w-4xl mx-auto">
            <div class="relative">
                <!-- Connecting line (desktop only) -->
                <div
                    class="hidden md:block absolute top-8 left-0 right-0 h-0.5 bg-gradient-to-r from-blue-500/20 via-blue-500/40 to-blue-500/20"
                >
                </div>

                <!-- Steps -->
                <div class="grid md:grid-cols-3 gap-12 md:gap-8 relative">
                    <!-- Step 1 -->
                    <div class="flex flex-col items-center text-center">
                        <div
                            class="w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center mb-6 relative z-10"
                        >
                            <span class="text-2xl font-bold text-zinc-950"
                                >1</span
                            >
                        </div>
                        <h3 class="text-xl font-semibold mb-3">Index</h3>
                        <p class="text-zinc-400 text-sm leading-relaxed">
                            SCIP indexer extracts symbols, definitions, and
                            relationships from your code
                        </p>
                    </div>

                    <!-- Step 2 -->
                    <div class="flex flex-col items-center text-center">
                        <div
                            class="w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center mb-6 relative z-10"
                        >
                            <span class="text-2xl font-bold text-zinc-950"
                                >2</span
                            >
                        </div>
                        <h3 class="text-xl font-semibold mb-3">Store</h3>
                        <p class="text-zinc-400 text-sm leading-relaxed">
                            dora converts to SQLite with pre-computed aggregates
                            for instant queries
                        </p>
                    </div>

                    <!-- Step 3 -->
                    <div class="flex flex-col items-center text-center">
                        <div
                            class="w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center mb-6 relative z-10"
                        >
                            <span class="text-2xl font-bold text-zinc-950"
                                >3</span
                            >
                        </div>
                        <h3 class="text-xl font-semibold mb-3">Query</h3>
                        <p class="text-zinc-400 text-sm leading-relaxed">
                            AI agents get structured answers without reading
                            files or wasting tokens
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- CTA Section -->
        <div class="border-t border-zinc-800 mt-20">
            <div class="max-w-4xl mx-auto px-6 py-16 text-center">
                <h3 class="text-2xl font-bold mb-4">Ready to get started?</h3>
                <p class="text-zinc-400 mb-8">
                    Install dora and start exploring your codebase with
                    structured queries.
                </p>
                <div class="flex flex-wrap gap-4 justify-center mb-10">
                    <a
                        href="#quick-start"
                        class="bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2"
                    >
                        <Zap class="w-5 h-5" />
                        Get Started
                    </a>
                    <a
                        href="https://github.com/butttons/dora"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="border-2 border-blue-500 hover:bg-blue-500/10 text-blue-400 px-6 py-3 rounded-lg font-semibold transition-colors flex items-center gap-2"
                    >
                        <Github class="w-5 h-5" />
                        View on GitHub
                    </a>
                </div>
                <div class="text-zinc-500 text-sm">
                    Powered by{" "}
                    <a
                        href="https://github.com/sourcegraph/scip"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="text-blue-400 hover:text-blue-300 transition-colors font-semibold"
                    >
                        SCIP â†—
                    </a>
                </div>
            </div>
        </div>
    </div>
</Layout>
